{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "editor",
  "type": "registry:component",
  "title": "Editor",
  "description": "A tiptap editor.",
  "dependencies": [
    "@tiptap/core@3.13.0",
    "@tiptap/react@3.13.0",
    "@tiptap/starter-kit@3.13.0"
  ],
  "registryDependencies": [
    "button"
  ],
  "files": [
    {
      "path": "src/registry/bricks/tiptap-editor/components/editor.tsx",
      "content": "\"use client\";\n\nimport type { Editor as EditorType, JSONContent } from \"@tiptap/core\";\nimport { EditorContent, useEditor } from \"@tiptap/react\";\nimport StarterKit from \"@tiptap/starter-kit\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport {\n  Bold,\n  Code,\n  Italic,\n  List,\n  ListOrdered,\n  Strikethrough,\n  Underline,\n} from \"lucide-react\";\nimport React from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\n\ntype TEditorContent = JSONContent | string;\ntype EditorContextProps = {\n  editor: EditorType | null;\n  initialContent: TEditorContent;\n  setInitialContent: React.Dispatch<React.SetStateAction<string | JSONContent>>;\n  currentContent: TEditorContent;\n};\nconst EditorContext = React.createContext<EditorContextProps>({\n  editor: null,\n  initialContent: \"\",\n  setInitialContent: (content: TEditorContent) => content,\n  currentContent: \"\",\n});\nexport function useEditorContext() {\n  const ctx = React.use(EditorContext);\n  return ctx;\n}\n\nfunction getExtensions() {\n  return [StarterKit];\n}\n\nfunction EditorRoot({ children }: { children: React.ReactNode }) {\n  const [initialContent, setInitialContent] =\n    React.useState<TEditorContent>(\"\");\n  const [currentContent, setCurrentContent] =\n    React.useState<TEditorContent>(\"\");\n\n  const editor = useEditor(\n    {\n      extensions: getExtensions(),\n      immediatelyRender: false,\n      content: initialContent,\n      onUpdate: async ({ editor }) => {\n        setCurrentContent(editor.getJSON());\n      },\n    },\n    [initialContent],\n  );\n\n  if (!editor) {\n    return null;\n  }\n\n  const value = {\n    editor,\n    initialContent,\n    setInitialContent,\n    currentContent,\n  };\n\n  return <EditorContext value={value}>{children}</EditorContext>;\n}\n\nconst editorContentStyleVariant = cva(\n  \"[&>.ProseMirror]:focus-visible:border-none [&>.ProseMirror]:focus-visible:shadow-none [&>.ProseMirror]:focus-visible:outline-none\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"[&_blockquote]:my-2.5 [&_blockquote]:border-muted-foreground [&_blockquote]:border-l-4 [&_blockquote]:px-5 [&_blockquote]:py-2.5 [&_code]:bg-muted [&_code]:px-1 [&_code]:font-mono [&_em]:italic [&_h1]:font-bold [&_h1]:text-6xl [&_h2]:font-semibold [&_h2]:text-4xl [&_h3]:font-semibold [&_h3]:text-3xl [&_h4]:font-semibold [&_h4]:text-2xl [&_h5]:font-semibold [&_h5]:text-xl [&_h6]:font-semibold [&_h6]:text-lg [&_hr]:border-muted-foreground [&_ol]:list-decimal [&_s]:line-through [&_strong]:font-bold [&_u]:underline [&_ul]:list-disc\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\ntype EditorEditorProps = React.ComponentPropsWithRef<\"div\"> &\n  VariantProps<typeof editorContentStyleVariant> & {\n    content?: TEditorContent;\n    onContentUpdate?: (content: TEditorContent) => void;\n  };\nfunction EditorEditor({\n  content,\n  onContentUpdate,\n  className,\n  variant,\n  ...props\n}: EditorEditorProps) {\n  const { editor, currentContent, initialContent, setInitialContent } =\n    useEditorContext();\n\n  if (!editor) {\n    throw new Error(\"Editor.Editor should be in Editor.Root\");\n  }\n\n  React.useEffect(() => {\n    if (content) {\n      setInitialContent(content);\n    }\n  }, [content, setInitialContent]);\n\n  React.useEffect(() => {\n    if (onContentUpdate) {\n      onContentUpdate(currentContent ? currentContent : initialContent);\n    }\n  }, [onContentUpdate, currentContent, initialContent]);\n\n  return (\n    <EditorContent\n      editor={editor}\n      className={cn(\n        editorContentStyleVariant({\n          variant,\n          className,\n        }),\n      )}\n      {...props}\n    />\n  );\n}\n\ntype EditorReadOnlyProps = React.ComponentPropsWithRef<\"div\"> &\n  VariantProps<typeof editorContentStyleVariant>;\nfunction EditorReadOnly({ className, variant, ...props }: EditorReadOnlyProps) {\n  const ctx = useEditorContext();\n\n  if (!ctx || !ctx.editor) {\n    throw new Error(\"Editor.ReadOnly should be in Editor.Root\");\n  }\n\n  const editor = useEditor(\n    {\n      extensions: getExtensions(),\n      immediatelyRender: false,\n      content:\n        typeof ctx.currentContent === \"string\"\n          ? ctx.initialContent\n          : ctx.currentContent,\n      editable: false,\n    },\n    [ctx],\n  );\n\n  if (editor === null) {\n    return <div className=\"text-destructive\">Editor failed to initiate</div>;\n  }\n\n  return (\n    <EditorContent\n      editor={editor}\n      className={cn(\n        editorContentStyleVariant({\n          variant,\n          className,\n        }),\n      )}\n      {...props}\n    />\n  );\n}\n\n// ========================\n// ==== Toggle Buttons ====\n// ========================\ntype EditorToggleBoldBtnProps = React.ComponentPropsWithRef<\"button\">;\nfunction EditorToggleBoldBtn(props: EditorToggleBoldBtnProps) {\n  const { editor } = useEditorContext();\n\n  if (!editor) {\n    throw new Error(\"Editor.ToggleBoldBtn should be in Editor.Root\");\n  }\n\n  return (\n    <Button\n      variant={editor.isActive(\"bold\") ? \"default\" : \"outline\"}\n      size={\"icon-sm\"}\n      className={cn(\"cursor-pointer\", props.className)}\n      onClick={() => {\n        editor.chain().focus().toggleBold().run();\n      }}\n      {...props}\n    >\n      <Bold className=\"size-4\" />\n    </Button>\n  );\n}\n\ntype EditorToggleItalicBtnProps = React.ComponentPropsWithRef<\"button\">;\nfunction EditorToggleItalicBtn(props: EditorToggleItalicBtnProps) {\n  const { editor } = useEditorContext();\n\n  if (!editor) {\n    throw new Error(\"Editor.ToggleItalicBtn should be in Editor.Root\");\n  }\n\n  return (\n    <Button\n      variant={editor.isActive(\"italic\") ? \"default\" : \"outline\"}\n      size={\"icon-sm\"}\n      className={cn(\"cursor-pointer\", props.className)}\n      onClick={() => {\n        editor.chain().focus().toggleItalic().run();\n      }}\n      {...props}\n    >\n      <Italic className=\"size-4\" />\n    </Button>\n  );\n}\n\ntype EditorToggleUnderlineBtnProps = React.ComponentPropsWithRef<\"button\">;\nfunction EditorToggleUnderlineBtn(props: EditorToggleUnderlineBtnProps) {\n  const { editor } = useEditorContext();\n\n  if (!editor) {\n    throw new Error(\"Editor.ToggleUnderlineBtn should be in Editor.Root\");\n  }\n\n  return (\n    <Button\n      variant={editor.isActive(\"underline\") ? \"default\" : \"outline\"}\n      size={\"icon-sm\"}\n      className={cn(\"cursor-pointer\", props.className)}\n      onClick={() => {\n        editor.chain().focus().toggleUnderline().run();\n      }}\n      {...props}\n    >\n      <Underline className=\"size-4\" />\n    </Button>\n  );\n}\n\ntype EditorToggleStrikeBtnProps = React.ComponentPropsWithRef<\"button\">;\nfunction EditorToggleStrikeBtn(props: EditorToggleStrikeBtnProps) {\n  const { editor } = useEditorContext();\n\n  if (!editor) {\n    throw new Error(\"Editor.ToggleStrikeBtn should be in Editor.Root\");\n  }\n\n  return (\n    <Button\n      variant={editor.isActive(\"strike\") ? \"default\" : \"outline\"}\n      size={\"icon-sm\"}\n      className={cn(\"cursor-pointer\", props.className)}\n      onClick={() => {\n        editor.chain().focus().toggleStrike().run();\n      }}\n      {...props}\n    >\n      <Strikethrough className=\"size-4\" />\n    </Button>\n  );\n}\n\ntype EditorToggleCodeBtnProps = React.ComponentPropsWithRef<\"button\">;\nfunction EditorToggleCodeBtn(props: EditorToggleCodeBtnProps) {\n  const { editor } = useEditorContext();\n\n  if (!editor) {\n    throw new Error(\"Editor.ToggleCodeBtn should be in Editor.Root\");\n  }\n\n  return (\n    <Button\n      variant={editor.isActive(\"code\") ? \"default\" : \"outline\"}\n      size={\"icon-sm\"}\n      className={cn(\"cursor-pointer\", props.className)}\n      onClick={() => {\n        editor.chain().focus().toggleCode().run();\n      }}\n      {...props}\n    >\n      <Code className=\"size-4\" />\n    </Button>\n  );\n}\n\ntype EditorToggleBulletListBtnProps = React.ComponentPropsWithRef<\"button\">;\nfunction EditorToggleBulletListBtn(props: EditorToggleBulletListBtnProps) {\n  const { editor } = useEditorContext();\n\n  if (!editor) {\n    throw new Error(\"Editor.ToggleBulletListBtn should be in Editor.Root\");\n  }\n\n  return (\n    <Button\n      variant={editor.isActive(\"bulletList\") ? \"default\" : \"outline\"}\n      size={\"icon-sm\"}\n      className={cn(\"cursor-pointer\", props.className)}\n      onClick={() => {\n        editor.chain().focus().toggleBulletList().run();\n      }}\n      {...props}\n    >\n      <List className=\"size-4\" />\n    </Button>\n  );\n}\n\ntype EditorToggleOrderedListBtnProps = React.ComponentPropsWithRef<\"button\">;\nfunction EditorToggleOrderedListBtn(props: EditorToggleOrderedListBtnProps) {\n  const { editor } = useEditorContext();\n\n  if (!editor) {\n    throw new Error(\"Editor.ToggleOrderedListBtn should be in Editor.Root\");\n  }\n\n  return (\n    <Button\n      variant={editor.isActive(\"orderedList\") ? \"default\" : \"outline\"}\n      size={\"icon-sm\"}\n      className={cn(\"cursor-pointer\", props.className)}\n      onClick={() => {\n        editor.chain().focus().toggleOrderedList().run();\n      }}\n      {...props}\n    >\n      <ListOrdered className=\"size-4\" />\n    </Button>\n  );\n}\n\nconst Root = EditorRoot;\nconst Editor = EditorEditor;\nconst ReadOnly = EditorReadOnly;\nconst ToggleBoldBtn = EditorToggleBoldBtn;\nconst ToggleItalicBtn = EditorToggleItalicBtn;\nconst ToggleUnderlineBtn = EditorToggleUnderlineBtn;\nconst ToggleStrikeBtn = EditorToggleStrikeBtn;\nconst ToggleCodeBtn = EditorToggleCodeBtn;\nconst ToggleBulletListBtn = EditorToggleBulletListBtn;\nconst ToggleOrderedListBtn = EditorToggleOrderedListBtn;\n\nexport {\n  Root,\n  Editor,\n  ReadOnly,\n  ToggleBoldBtn,\n  ToggleItalicBtn,\n  ToggleUnderlineBtn,\n  ToggleStrikeBtn,\n  ToggleCodeBtn,\n  ToggleBulletListBtn,\n  ToggleOrderedListBtn,\n};\n",
      "type": "registry:component",
      "target": "components/bricks/tiptap-editor/editor.tsx"
    }
  ]
}