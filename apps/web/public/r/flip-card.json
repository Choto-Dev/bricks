{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "flip-card",
  "type": "registry:component",
  "title": "Flip Card",
  "description": "A component for flipping card.",
  "dependencies": [
    "@gsap/react",
    "gsap"
  ],
  "files": [
    {
      "path": "./src/registry/bricks/components/flip-card.tsx",
      "content": "\"use client\";\n\nimport { useGSAP } from \"@gsap/react\";\nimport gsap from \"gsap\";\nimport React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ngsap.registerPlugin(useGSAP);\n\ntype TFlipCardContext = {\n  tl: gsap.core.Timeline;\n  flipCount: number;\n  setFlipCount: React.Dispatch<React.SetStateAction<number>>;\n  currentAnimationTime: number;\n  setCurrentAnimationTime: React.Dispatch<React.SetStateAction<number>>;\n  duration: number;\n} | null;\nconst FlipCardContext = React.createContext<TFlipCardContext>(null);\nfunction useFlipCardContext() {\n  return React.use(FlipCardContext);\n}\n\ntype FlipCardRootProps = React.ComponentPropsWithRef<\"div\">;\nfunction FlipCardRoot(props: FlipCardRootProps) {\n  const [flipCount, setFlipCount] = React.useState(1);\n  const [currentAnimationTime, setCurrentAnimationTime] = React.useState(0);\n\n  return (\n    <FlipCardContext\n      value={{\n        tl: gsap.timeline(),\n        flipCount,\n        setFlipCount,\n        currentAnimationTime,\n        setCurrentAnimationTime,\n        duration: 0.5,\n      }}\n    >\n      <div\n        {...props}\n        className={cn(\"perspective-distant bg-transparent\", props.className)}\n      />\n    </FlipCardContext>\n  );\n}\n\ntype FlipCardContainerProps = React.ComponentPropsWithRef<\"div\">;\nfunction FlipCardContainer(props: FlipCardContainerProps) {\n  const cardCtx = useFlipCardContext();\n\n  if (!cardCtx) {\n    throw new Error(\"`FlipCard.Container` should be in `FlipCard.Root`.\");\n  }\n\n  const cardRef = React.useRef<HTMLDivElement | null>(null);\n\n  return (\n    // biome-ignore lint/a11y/noStaticElementInteractions: <\"allow\">\n    // biome-ignore lint/a11y/useKeyWithClickEvents: <\"allow\">\n    <div\n      {...props}\n      ref={cardRef}\n      className={cn(\n        \"relative flex min-h-52 min-w-40 items-center justify-center bg-transparent\",\n        props.className,\n      )}\n      onMouseDown={(e) => {\n        if (e.detail > 1) {\n          e.preventDefault();\n        }\n      }}\n      onClick={() => {\n        if (\n          !(\n            cardCtx.currentAnimationTime < 0.5 &&\n            cardCtx.currentAnimationTime > 0\n          )\n        ) {\n          cardCtx.tl.to(cardRef.current, {\n            rotateY: cardCtx.flipCount * 180,\n            duration: cardCtx.duration,\n            onUpdate: () => {\n              cardCtx.setCurrentAnimationTime(cardCtx.tl.time());\n            },\n            onComplete: () => {\n              cardCtx.tl.clear();\n            },\n          });\n          cardCtx.setFlipCount((flipCount) => flipCount + 1);\n        }\n      }}\n    />\n  );\n}\n\ntype FlipCardFrontCardProps = React.ComponentPropsWithRef<\"div\">;\nfunction FlipCardFrontCard(props: FlipCardFrontCardProps) {\n  const cardCtx = useFlipCardContext();\n\n  if (!cardCtx) {\n    throw new Error(\"`FlipCard.FrontCard` should be in `FlipCard.Root`.\");\n  }\n\n  return (\n    <div\n      className={cn(\n        \"absolute inset-0 h-full w-full bg-transparent opacity-0 transition-all\",\n        cardCtx.flipCount % 2 === 1 && \"opacity-100\",\n      )}\n      style={{ transitionDuration: `${cardCtx.duration / 2}s` }}\n    >\n      <div {...props} className={cn(\"h-full w-full\", props.className)} />\n    </div>\n  );\n}\n\ntype FlipCardBackCardProps = React.ComponentPropsWithRef<\"div\">;\nfunction FlipCardBackCard(props: FlipCardBackCardProps) {\n  const cardCtx = useFlipCardContext();\n\n  if (!cardCtx) {\n    throw new Error(\"`FlipCard.BackCard` should be in `FlipCard.Root`.\");\n  }\n\n  return (\n    <div\n      className={cn(\n        \"absolute inset-0 h-full w-full rotate-y-180 bg-transparent opacity-0 transition-all\",\n        cardCtx.flipCount % 2 === 0 && \"opacity-100\",\n      )}\n      style={{ transitionDuration: `${cardCtx.duration / 2}s` }}\n    >\n      <div {...props} className={cn(\"h-full w-full\", props.className)} />\n    </div>\n  );\n}\n\nexport {\n  FlipCardRoot as Root,\n  FlipCardContainer as Container,\n  FlipCardFrontCard as FrontCard,\n  FlipCardBackCard as BackCard,\n};\n",
      "type": "registry:component",
      "target": "components/bricks/flip-card.tsx"
    }
  ]
}