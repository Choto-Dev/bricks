{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "flip-card",
  "type": "registry:component",
  "title": "Flip Card",
  "description": "A component for flipping card.",
  "dependencies": [
    "@gsap/react",
    "gsap"
  ],
  "files": [
    {
      "path": "./src/registry/bricks/components/flip-card.tsx",
      "content": "\"use client\";\r\n\r\nimport { useGSAP } from \"@gsap/react\";\r\nimport gsap from \"gsap\";\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ngsap.registerPlugin(useGSAP);\r\n\r\ntype TFlipCardContext = {\r\n  tl: gsap.core.Timeline;\r\n  flipCount: number;\r\n  setFlipCount: React.Dispatch<React.SetStateAction<number>>;\r\n  currentAnimationTime: number;\r\n  setCurrentAnimationTime: React.Dispatch<React.SetStateAction<number>>;\r\n} | null;\r\nconst FlipCardContext = React.createContext<TFlipCardContext>(null);\r\nfunction useFlipCardContext() {\r\n  return React.use(FlipCardContext);\r\n}\r\n\r\ntype FlipCardRootProps = React.ComponentPropsWithRef<\"div\">;\r\nfunction FlipCardRoot(props: FlipCardRootProps) {\r\n  const [flipCount, setFlipCount] = React.useState(1);\r\n  const [currentAnimationTime, setCurrentAnimationTime] = React.useState(0);\r\n\r\n  return (\r\n    <FlipCardContext\r\n      value={{\r\n        tl: gsap.timeline(),\r\n        flipCount,\r\n        setFlipCount,\r\n        currentAnimationTime,\r\n        setCurrentAnimationTime,\r\n      }}\r\n    >\r\n      <div {...props} className={cn(\"perspective-distant\", props.className)} />\r\n    </FlipCardContext>\r\n  );\r\n}\r\n\r\ntype FlipCardContainerProps = React.ComponentPropsWithRef<\"div\">;\r\nfunction FlipCardContainer(props: FlipCardContainerProps) {\r\n  const cardCtx = useFlipCardContext();\r\n\r\n  if (!cardCtx) {\r\n    throw new Error(\"`FlipCard.Container` should be in `FlipCard.Root`.\");\r\n  }\r\n\r\n  const cardRef = React.useRef<HTMLDivElement | null>(null);\r\n\r\n  return (\r\n    // biome-ignore lint/a11y/noStaticElementInteractions: <\"allow\">\r\n    // biome-ignore lint/a11y/useKeyWithClickEvents: <\"allow\">\r\n    <div\r\n      {...props}\r\n      ref={cardRef}\r\n      className={cn(\r\n        \"relative flex min-h-52 min-w-40 items-center justify-center\",\r\n        props.className,\r\n      )}\r\n      onMouseDown={(e) => {\r\n        if (e.detail > 1) {\r\n          e.preventDefault();\r\n        }\r\n      }}\r\n      onClick={() => {\r\n        if (\r\n          !(\r\n            cardCtx.currentAnimationTime < 0.5 &&\r\n            cardCtx.currentAnimationTime > 0\r\n          )\r\n        ) {\r\n          cardCtx.tl.to(cardRef.current, {\r\n            rotateY: cardCtx.flipCount * 180,\r\n            onUpdate: () => {\r\n              cardCtx.setCurrentAnimationTime(cardCtx.tl.time());\r\n            },\r\n            onComplete: () => {\r\n              cardCtx.tl.clear();\r\n            },\r\n          });\r\n          cardCtx.setFlipCount((flipCount) => flipCount + 1);\r\n        }\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\ntype FlipCardFrontCardProps = React.ComponentPropsWithRef<\"div\">;\r\nfunction FlipCardFrontCard(props: FlipCardFrontCardProps) {\r\n  const cardCtx = useFlipCardContext();\r\n\r\n  if (!cardCtx) {\r\n    throw new Error(\"`FlipCard.FrontCard` should be in `FlipCard.Root`.\");\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"absolute inset-0 h-full w-full bg-background opacity-100 transition-all\",\r\n        cardCtx.flipCount % 2 !== 1 && \"opacity-0\",\r\n      )}\r\n      style={{ transitionDuration: \"0.5s\" }}\r\n    >\r\n      <div {...props} className={cn(\"h-full w-full\", props.className)} />\r\n    </div>\r\n  );\r\n}\r\n\r\ntype FlipCardBackCardProps = React.ComponentPropsWithRef<\"div\">;\r\nfunction FlipCardBackCard(props: FlipCardBackCardProps) {\r\n  const cardCtx = useFlipCardContext();\r\n\r\n  if (!cardCtx) {\r\n    throw new Error(\"`FlipCard.BackCard` should be in `FlipCard.Root`.\");\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"absolute inset-0 h-full w-full rotate-y-180 bg-background opacity-0 transition-all\",\r\n        cardCtx.flipCount % 2 === 0 && \"opacity-100\",\r\n      )}\r\n      style={{ transitionDuration: \"0.5s\" }}\r\n    >\r\n      <div {...props} className={cn(\"h-full w-full\", props.className)} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport {\r\n  FlipCardRoot as Root,\r\n  FlipCardContainer as Container,\r\n  FlipCardFrontCard as FrontCard,\r\n  FlipCardBackCard as BackCard,\r\n};\r\n",
      "type": "registry:component",
      "target": "components/bricks/flip-card.tsx"
    }
  ]
}