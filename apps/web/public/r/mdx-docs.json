{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "mdx-docs",
  "type": "registry:item",
  "title": "Mdx Docs",
  "description": "Mdx doc support.",
  "dependencies": [
    "fumadocs-core",
    "fumadocs-mdx"
  ],
  "devDependencies": [
    "@types/mdx"
  ],
  "registryDependencies": [
    "https://choto-bricks.vercel.app/r/article.json"
  ],
  "files": [
    {
      "path": "src/registry/bricks/mdx-docs/components/docs.tsx",
      "content": "\"use client\";\n\nimport type * as PageTree from \"fumadocs-core/page-tree\";\nimport Link from \"next/link\";\nimport React from \"react\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarProvider,\n} from \"@/components/ui/sidebar\";\n\ntype GroupedMenu = PageTree.Node & {\n  pages: PageTree.Item[];\n};\n\nfunction groupMenuBySeparetor(menu: PageTree.Node[]): GroupedMenu[] {\n  const result: GroupedMenu[] = [];\n  let currentGroup: GroupedMenu | null = null;\n\n  for (const item of menu) {\n    if (item.type === \"separator\") {\n      currentGroup = { ...item, pages: [] };\n      result.push(currentGroup);\n    } else if (item.type === \"page\" && currentGroup) {\n      currentGroup.pages.push(item);\n    }\n  }\n\n  return result;\n}\n\ntype TDocsLayoutContext = unknown;\nconst DocsLayoutContext = React.createContext<TDocsLayoutContext | null>(null);\n\ntype DocsRootProps = { children: React.ReactNode };\nfunction DocsRoot(props: DocsRootProps) {\n  return (\n    <DocsLayoutContext value={{}}>\n      <SidebarProvider>{props.children}</SidebarProvider>\n    </DocsLayoutContext>\n  );\n}\n\ntype DocsSidebarProps = {\n  menu: PageTree.Root;\n};\nfunction DocsSidebar(props: DocsSidebarProps) {\n  const menu = groupMenuBySeparetor(props.menu.children);\n\n  console.log(menu);\n\n  return (\n    <Sidebar variant=\"sidebar\">\n      <SidebarContent>\n        {menu.map((group) => (\n          <SidebarGroup key={group.$id}>\n            <SidebarGroupLabel>{group.name}</SidebarGroupLabel>\n            <SidebarGroupContent>\n              <SidebarMenu>\n                {group.pages.map((page) => (\n                  <SidebarMenuItem key={page.$id}>\n                    <SidebarMenuButton asChild>\n                      <Link href={page.url}>{page.name}</Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                ))}\n              </SidebarMenu>\n            </SidebarGroupContent>\n          </SidebarGroup>\n        ))}\n      </SidebarContent>\n    </Sidebar>\n  );\n}\n\nexport { DocsRoot as Root, DocsSidebar as Sidebar };\n",
      "type": "registry:component",
      "target": "components/bricks/mdx-docs/docs.tsx"
    },
    {
      "path": "src/registry/bricks/mdx-docs/components/mdx-components.tsx",
      "content": "import type { MDXComponents } from \"mdx/types\";\nimport Image, { type ImageProps } from \"next/image\";\nimport { cn } from \"@/lib/utils\";\nimport * as Article from \"@/registry/bricks/components/article\";\n\n/**\n * TODOs:\n * 1. create mdx related component.\n *    - codeblocks\n *    - callouts\n *    - layout component\n * 2. recreate all the \"defaultMdxComponents\" from fumadocs.\n */\n\nconst defaultMdxComponents: MDXComponents = {\n  blockquote: Article.Blockquote,\n  h1: Article.Title,\n  h2: (props: React.HTMLAttributes<HTMLHeadingElement>) => (\n    <Article.Heading headingLevel=\"level-1\" {...props} />\n  ),\n  h3: (props: React.HTMLAttributes<HTMLHeadingElement>) => (\n    <Article.Heading headingLevel=\"level-2\" {...props} />\n  ),\n  h4: (props: React.HTMLAttributes<HTMLHeadingElement>) => (\n    <Article.Heading headingLevel=\"level-3\" {...props} />\n  ),\n  h5: (props: React.HTMLAttributes<HTMLHeadingElement>) => (\n    <Article.Heading headingLevel=\"level-4\" {...props} />\n  ),\n  h6: (props: React.HTMLAttributes<HTMLHeadingElement>) => (\n    <Article.Heading headingLevel=\"level-5\" {...props} />\n  ),\n  p: Article.Paragraph,\n  a: Article.Link,\n  img: (props: ImageProps) => <Image {...props} />,\n  ol: Article.Ol,\n  ul: (props: React.HTMLAttributes<HTMLUListElement>) => {\n    if (props.className?.includes(\"contains-task-list\")) {\n      return <Article.Ul variant={\"task-list\"} {...props} />;\n    }\n    return <Article.Ul {...props} />;\n  },\n  li: (props: React.HTMLAttributes<HTMLLIElement>) => {\n    if (props.className?.includes(\"task-list-item\")) {\n      return (\n        <Article.Li\n          {...props}\n          className={cn(\"flex items-center gap-2\", props.className)}\n        />\n      );\n    }\n    return <Article.Li {...props} />;\n  },\n  input: Article.TaskCheckbox,\n};\n\nexport function getMDXComponents(components?: MDXComponents): MDXComponents {\n  return {\n    ...defaultMdxComponents,\n    ...components,\n  };\n}\n",
      "type": "registry:component",
      "target": "components/bricks/mdx-docs/mdx-components.tsx"
    },
    {
      "path": "src/registry/bricks/mdx-docs/lib/source.config.ts",
      "content": "import {\n  defineConfig,\n  defineDocs,\n  frontmatterSchema,\n  metaSchema,\n} from \"fumadocs-mdx/config\";\n\nexport const docs = defineDocs({\n  dir: \"content/docs\",\n  docs: {\n    schema: frontmatterSchema,\n  },\n  meta: {\n    schema: metaSchema,\n  },\n});\n\nexport default defineConfig({\n  mdxOptions: {\n    // MDX options\n  },\n});\n",
      "type": "registry:lib",
      "target": "lib/bricks/mdx-docs/source.config.ts"
    },
    {
      "path": "src/registry/bricks/mdx-docs/lib/source.ts",
      "content": "import { loader } from \"fumadocs-core/source\";\nimport { lucideIconsPlugin } from \"fumadocs-core/source/lucide-icons\";\nimport { docs } from \"@/.source/server\";\n\nexport const source = {\n  docs: loader({\n    baseUrl: \"/docs\",\n    source: docs.toFumadocsSource(),\n    plugins: [lucideIconsPlugin()],\n  }),\n};\n",
      "type": "registry:lib",
      "target": "lib/bricks/mdx-docs/source.ts"
    }
  ]
}